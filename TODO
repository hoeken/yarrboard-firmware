# GENERAL

## BRINEOMATIC

* show "error" when no value:
    * filter pressure
    * membrane pressure
    * motor temperature
    * tank level
* total time tracking is broken
* move all the brineomatic stuff in setup() and loop() internal to BOM object.
    * probably dont need the helper functions like setFilterPressure()
    * keep setWaterTemperature() and setTankLevel()
    * create super simple flowmeter object
* ntp server and next flush being an actual time that is stored in preferences (survive reboot)
* move brineomatic to interrupt based adc
* add mid-level commands to set_watermaker
    * boost_pump
    * high_pressure_pump
    * flush_valve
    * fan
    * diverter valve
* add mid level UI icons/commands for watermaker parts:
    * boost_pump
    * hp pump
    * diverter valve
    * flush valve
    * fan
    * membrane_pressure_target
    * advanced -> raw *channel ui
* move everything to SI units, add configurable units
* add simple HA support to brineomatic?
    * on/off switch to start/stop the watermaker
    * sensors for each output type
    * YAML dashboard

## FROTHFET

* sporadic crash when fading and saving to prefs at the same time.
* slow vs fast blow
    * fast checks getLatestReading()
    * slow checks getAverageReading()
* update yarrboard client if any changes needed - probably for state
* update signalk plugin - same
* go through and re-adjust the various page sizes for our different viewports
* protocol documentation
* add buzzer support - enable alarms for tripped or bypassed on a per-channel basis
* add OVERHEAT as a state - similar to trip, must be turned off before turn on.
    * if we have temperature, we should also check that before we enable the channel

## LONG TERM:

* fork + modify esp32FOTA to use bundled certificates
* UI
    * combine config and settings page into a single mega page
    * dio channels
    * fan channels?
* signalk plugins
    * should we move this to the firmware instead?
    * frothfet plugin - use key for paths instead of id
    * signalk sendit plugin - use key for paths instead of id
* brineomatic graphs
    * app.addPage("page", "content", openCallback);
    * app.onOpenPage(page, callback);
* remove all onclick calls from the html.
* global cleanup of strcpy, sprintf, etc.
* espwebtools?  https://esphome.github.io/esp-web-tools/
* yarrboard c++ framework
    * create YarrboardApp class
    * copy the ChannelRegistry style from JS and port to c++
    * move channel headers/classes to a channels/ folder
    * rename foo_channel.cpp to FooChannel.cpp to match class names
    * misc functons:
        * setLogo() or #define to set the logo file
        * addJS(); -> how do we dynamically add in our js to a precompiled file? gulp?
        * addCSS(); -> how do we dynamically add in our css to a precompiled file? gulp?
    * create callbacks:
        * onSetup() - main.cpp
        * onLoop() - main.cpp
        * onInit() - prefs.cpp
        * onGenerateConfig() - prefs.cpp
        * onLoadConfig() - prefs.cpp
        * onMQTTUpdate() - mqtt.cpp
        * onHADiscovery() - mqtt.cpp
        * onUpdate() - protocol.cpp
        * onFastUpdate() - protocol.cpp
        * onStats() - protocol.cpp
        * onMessage() - gets called for every single message
        * registerNobodyCommand("command", callback);
        * registerGuestCommand("command", callback);
        * registerAdminCommand("command", callback);
    * for looping only stuff it would be best to do something like this:
        * yba.registerChannels(channels);
        * yba.registerMQTTChannels(channels);
        * yba.registerHAChannels(channels);
* other MFD integrations:
    * garmin?
    * raymarine?
* refactor yarrboard-firmware into something separate from frothfet / brineomatic / sendit:
    * what is the structure?
        * c++ code side: library with lots of callbacks?
        * javascript side: javascript include with lots of callbacks?
        * html???

# B&G MFD Dev Info
B&G : User Agent: Mozilla/5.0 (X11; Linux aarch64) AppleWebKit/537.36 (KHTML, like Gecko) QtWebEngine/5.12.9 Chrome/69.0.3497.128 Safari/537.36
https://ungoogled-software.github.io/ungoogled-chromium-binaries/releases/linux_portable/64bit/