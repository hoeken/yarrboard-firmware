# v2.2 TODO

## FROTHFET

* Rev F: add support for INA226 to each channel
    * add support for overcurrent alert interrupt to each channel
* Rev F: add support for LM75 to each channel
    * add to client UI (orange)
    * add overheat trip count to stats page
* sporadic crash when fading and saving to prefs at the same time.
* slow vs fast blow
    * fast checks getLatestReading()
    * slow checks getAverageReading()
* update yarrboard client if any changes needed - probably for state
* update signalk plugin - same
* go through and re-adjust the various page sizes for our different viewports
* protocol documentation
* add buzzer support - enable alarms for tripped or bypassed on a per-channel basis

## BRINEOMATIC

* Rev C: add support for motor + water temperature sensors.
* Rev C: variable adc gain per-channel
* move everything to SI units, add configurable units
* add simple HA support to brineomatic?
    * on/off switch to start/stop the watermaker
    * sensors for each output type
    * YAML dashboard

## SENDIT

* Test new board

# LONG TERM:

* UI
    * combine config and settings page into a single mega page
    * dio channels
    * fan channels?
* signalk plugins
    * should we move this to the firmware instead?
    * frothfet plugin - use key for paths instead of id
    * signalk sendit plugin - use key for paths instead of id
* remove all onclick calls from the html.
* global cleanup of strcpy, sprintf, etc.
* espwebtools?  https://esphome.github.io/esp-web-tools/
* yarrboard c++ framework
    * more yarrboard.js functions:
        * app.addPage("page", "content", openCallback);
        * app.onOpenPage(page, callback);
        * many other app.* callbacks to register various things.
    * refactor yarrboard-firmware into yarrboard-framework + separate projects.
        * modify the gulp.js script to pull from the framework lib directory
        * project defines gulp rules to pull in custom stuff logo, css, js, etc.
            * html/index.html -> overrides framework html
            * html/logo.png -> overrides framework.html
            * html/css/* -> gets added to the framework css includes
            * html/js/* -> gets added to the framework js includes
    * create YarrboardFramework or YarrboardApp class
    * copy the ChannelRegistry style from JS and port to c++
    * move channel headers/classes to a channels/ folder
    * rename foo_channel.cpp to FooChannel.cpp to match class names
    * create callbacks:
        * onSetup() - main.cpp
        * onLoop() - main.cpp
        * onInit() - prefs.cpp
        * onGenerateConfig() - prefs.cpp
        * onLoadConfig() - prefs.cpp
        * onMQTTUpdate() - mqtt.cpp
        * onHADiscovery() - mqtt.cpp
        * onUpdate() - protocol.cpp
        * onFastUpdate() - protocol.cpp
        * onStats() - protocol.cpp
        * onMessage() - gets called for every single message
        * registerNobodyCommand("command", callback);
        * registerGuestCommand("command", callback);
        * registerAdminCommand("command", callback);
    * for looping only stuff it would be best to do something like this:
        * yba.registerChannels(channels);
        * yba.registerMQTTChannels(channels);
        * yba.registerHAChannels(channels);
* other MFD integrations:
    * garmin?
    * raymarine?

# B&G MFD Dev Info
B&G : User Agent: Mozilla/5.0 (X11; Linux aarch64) AppleWebKit/537.36 (KHTML, like Gecko) QtWebEngine/5.12.9 Chrome/69.0.3497.128 Safari/537.36
https://ungoogled-software.github.io/ungoogled-chromium-binaries/releases/linux_portable/64bit/